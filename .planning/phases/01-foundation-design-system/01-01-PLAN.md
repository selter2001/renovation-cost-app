---
phase: 01-foundation-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - vite.config.ts
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - index.html
  - eslint.config.js
  - src/main.tsx
  - src/App.tsx
  - src/index.css
  - src/vite-env.d.ts
  - src/components/theme-provider.tsx
  - src/i18n/index.ts
  - src/i18n/@types/i18next.d.ts
  - src/i18n/locales/pl/common.json
  - src/i18n/locales/en/common.json
  - src/router/index.tsx
  - src/pages/HomePage.tsx
  - components.json
autonomous: true

must_haves:
  truths:
    - "Aplikacja uruchamia sie przez pnpm dev bez bledow"
    - "Tailwind CSS klasy sa aplikowane (widoczne style w przegladarce)"
    - "shadcn/ui komponenty sa dostepne (Button renderuje sie poprawnie)"
    - "createHashRouter obsluguje routing -- adres /#/ wyswietla strone"
    - "Przelacznik motywu dziala -- klasa .dark dodaje sie na html, localStorage persystuje wybor"
    - "Brak FOUC -- odswiezenie w trybie ciemnym nie pokazuje bialego migniecia"
    - "i18next inicjalizuje sie -- useTranslation zwraca tlumaczenia z common.json"
    - "Zmiana jezyka PL/EN persystuje w localStorage po odswiezeniu"
    - "Fonty Inter i Montserrat laduja sie lokalnie (bez Google Fonts CDN)"
  artifacts:
    - path: "package.json"
      provides: "Zaleznosci projektu"
      contains: "react-router"
    - path: "vite.config.ts"
      provides: "Konfiguracja Vite z base path, Tailwind plugin, aliasy"
      contains: "@tailwindcss/vite"
    - path: "index.html"
      provides: "Entry point z inline anti-FOUC script"
      contains: "localStorage"
    - path: "src/components/theme-provider.tsx"
      provides: "ThemeProvider context + useTheme hook"
      exports: ["ThemeProvider", "useTheme"]
    - path: "src/i18n/index.ts"
      provides: "Inicjalizacja i18next z LanguageDetector"
      contains: "i18next-browser-languagedetector"
    - path: "src/i18n/@types/i18next.d.ts"
      provides: "Module augmentation dla type safety"
      contains: "CustomTypeOptions"
    - path: "src/router/index.tsx"
      provides: "createHashRouter z trasami"
      contains: "createHashRouter"
    - path: "src/index.css"
      provides: "Tailwind import + CSS variables dla light/dark theme"
      contains: "@import"
  key_links:
    - from: "src/main.tsx"
      to: "src/i18n/index.ts"
      via: "side-effect import (przed App)"
      pattern: 'import.*i18n'
    - from: "src/main.tsx"
      to: "src/components/theme-provider.tsx"
      via: "ThemeProvider opakowuje App"
      pattern: "ThemeProvider"
    - from: "src/App.tsx"
      to: "src/router/index.tsx"
      via: "RouterProvider renderuje router"
      pattern: "RouterProvider"
    - from: "index.html"
      to: "localStorage"
      via: "inline script czyta theme przed hydracjÄ…"
      pattern: "getItem.*theme"
---

<objective>
Scaffold kompletnego projektu RenoCost: Vite + React 19 + TypeScript + Tailwind v4 + shadcn/ui + routing + theme system + i18n.

Purpose: Stworzyc dzialajacy fundament techniczny z ktorego Plan 02 zbuduje widoczne UI.
Output: Dzialajacy projekt z `pnpm dev`, routing (HashRouter), dark/light mode bez FOUC, i18n PL/EN z persystencja, fonty Inter/Montserrat, shadcn komponenty gotowe do uzycia.
</objective>

<execution_context>
@/Users/wojciecholszak/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wojciecholszak/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-design-system/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold projektu i konfiguracja narzedzi</name>
  <files>
    package.json
    vite.config.ts
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    index.html
    eslint.config.js
    src/vite-env.d.ts
    src/index.css
    components.json
    .gitignore
  </files>
  <action>
    1. Stworz nowy projekt Vite w BIEZACYM katalogu (nie w podkatalogu -- repozytorium juz istnieje):
       ```
       pnpm create vite@latest . -- --template react-ts
       ```
       Jezeli pyta o nadpisanie -- potwierdz. Jezeli scaffold wymaga pustego katalogu, uzyj katalogu tymczasowego i przenies pliki.

    2. KRYTYCZNE -- ESLint blocker: Natychmiast po scaffoldzie sprawdz wersje ESLint:
       ```
       pnpm show eslint version
       ```
       Jezeli v10.x -- pinuj do v9: edytuj package.json -> `"eslint": "^9.39.3"` i uruchom `pnpm install`.
       Dodaj komentarz w eslint.config.js: `// TODO: Upgrade to ESLint v10 when eslint-plugin-react supports it (PR #3979)`

    3. Zainstaluj zaleznosci:
       ```
       pnpm add tailwindcss @tailwindcss/vite
       pnpm add react-router
       pnpm add i18next react-i18next i18next-browser-languagedetector
       pnpm add @fontsource-variable/inter @fontsource-variable/montserrat
       pnpm add -D @types/node
       ```

    4. Konfiguracja vite.config.ts:
       - base: "/przerobka/" (nazwa repozytorium -- sprawdz `git remote -v` jesli inne)
       - plugins: [react(), tailwindcss()]
       - resolve.alias: "@" -> path.resolve(__dirname, "./src")
       Uzyj wzorca z 01-RESEARCH.md Pattern 4.

    5. Konfiguracja tsconfig.json / tsconfig.app.json:
       - Dodaj "baseUrl": "." i "paths": {"@/*": ["./src/*"]} do compilerOptions
       Uzyj wzorca z 01-RESEARCH.md sekcja "tsconfig.json dla sciezek @/*".

    6. Inicjalizacja shadcn/ui:
       ```
       pnpm dlx shadcn@latest init
       ```
       Wybierz: New York style, Slate base color, CSS variables: yes.
       Jezeli shadcn CLI ma problem z detekcja Tailwind v4 (Pitfall 7 z RESEARCH.md) -- uzyj flagi `--force` lub stworz components.json recznie.
       Po inicjalizacji dodaj Button: `pnpm dlx shadcn@latest add button`

    7. Konfiguracja src/index.css:
       - Na gorze: `@import "tailwindcss";`
       - Dodaj shadcn CSS variables (wygenerowane przez shadcn init)
       - Dodaj custom kolory dla palety granat/grafit z akcentem (UI-02):
         CSS variables :root (light) i .dark zgodnie z 01-RESEARCH.md Pattern "CSS Variables dla glassmorphism palette"
       - Fonty: dodaj font-family override na Inter z fallbackiem Montserrat dla headingow

    8. index.html -- dodaj inline anti-FOUC script w <head> PRZED zamknieciem </head>:
       Uzyj dokladnego wzorca z 01-RESEARCH.md Pattern 2 Krok 1.
       WAZNE: klucz localStorage to "renocost-theme" (nie "vite-ui-theme" -- unikalna nazwa per-app).
       Dodaj takze import fontow w <head> jesli potrzebny (fontsource laduje sie z JS).

    9. .gitignore: upewnij sie ze zawiera node_modules, dist, .env*, .DS_Store
  </action>
  <verify>
    - `pnpm dev` uruchamia serwer bez bledow
    - `pnpm run lint` przechodzi bez bledow (ESLint v9.x)
    - `pnpm build` buduje bez bledow do dist/
    - Otwarcie http://localhost:5173 wyswietla strone (moze byc domyslna Vite)
    - Tailwind klasy dzialaja -- dodaj `className="text-red-500"` do dowolnego elementu i sprawdz w przegladarce
  </verify>
  <done>
    Projekt buduje sie i uruchamia bez bledow. ESLint na v9.x. Tailwind v4 klasy sa aplikowane. shadcn Button komponent renderuje sie poprawnie. Aliasy @/ dzialaja.
  </done>
</task>

<task type="auto">
  <name>Task 2: Theme system, i18n, routing i fonty</name>
  <files>
    src/main.tsx
    src/App.tsx
    src/components/theme-provider.tsx
    src/i18n/index.ts
    src/i18n/@types/i18next.d.ts
    src/i18n/locales/pl/common.json
    src/i18n/locales/en/common.json
    src/router/index.tsx
    src/pages/HomePage.tsx
  </files>
  <action>
    1. ThemeProvider (src/components/theme-provider.tsx):
       - Skopiuj dokladny wzorzec z 01-RESEARCH.md Pattern 2 Krok 2
       - WAZNE: storageKey domyslny = "renocost-theme" (ten sam co w inline script z index.html!)
       - Eksportuj ThemeProvider i useTheme

    2. i18n setup (src/i18n/index.ts):
       - Skopiuj wzorzec z 01-RESEARCH.md Pattern 3
       - WAZNE: lookupLocalStorage = "renocost-lng" (unikalny klucz per-app)
       - fallbackLng: "pl" (polski domyslny)
       - supportedLngs: ["pl", "en"]

    3. i18n TypeScript type safety (src/i18n/@types/i18next.d.ts):
       - Module augmentation zgodnie z 01-RESEARCH.md Pattern 3
       - CustomTypeOptions z defaultNS: "common" i resources

    4. Pliki tlumaczen:
       src/i18n/locales/pl/common.json -- kompletne tlumaczenia PL:
       ```json
       {
         "app": { "name": "RenoCost" },
         "nav": {
           "home": "Strona glowna",
           "language": "Jezyk",
           "theme": {
             "toggle": "Zmien motyw",
             "light": "Jasny",
             "dark": "Ciemny",
             "system": "Systemowy"
           },
           "userMenu": "Konto"
         },
         "home": {
           "title": "Kalkulator Kosztow Remontu",
           "subtitle": "Wycen remont pokoj po pokoju",
           "cta": "Rozpocznij wycene"
         },
         "common": {
           "loading": "Ladowanie..."
         }
       }
       ```
       src/i18n/locales/en/common.json -- kompletne tlumaczenia EN z identyczna struktura kluczy:
       ```json
       {
         "app": { "name": "RenoCost" },
         "nav": {
           "home": "Home",
           "language": "Language",
           "theme": {
             "toggle": "Toggle theme",
             "light": "Light",
             "dark": "Dark",
             "system": "System"
           },
           "userMenu": "Account"
         },
         "home": {
           "title": "Renovation Cost Calculator",
           "subtitle": "Estimate your renovation room by room",
           "cta": "Start estimate"
         },
         "common": {
           "loading": "Loading..."
         }
       }
       ```

    5. Router (src/router/index.tsx):
       - createHashRouter z 01-RESEARCH.md Pattern 1
       - Trasy: "/" -> Layout (stworz prosty layout wrapper) z child index -> HomePage
       - Layout na razie to prosty div z <Outlet /> (Navbar dojedzie w Plan 02)
       - Eksportuj router

    6. HomePage (src/pages/HomePage.tsx):
       - Prosty placeholder z useTranslation
       - Wyswietla t("home.title") i t("home.subtitle")
       - Uzyj klas Tailwind: wycentrowany tekst, duzy naglowek Montserrat, mniejszy podtytul Inter

    7. main.tsx -- zloz wszystko razem:
       - KOLEJNOSC IMPORTOW KRYTYCZNA:
         1. `import "@fontsource-variable/inter";`
         2. `import "@fontsource-variable/montserrat";`
         3. `import "./i18n/index";` (side-effect -- PRZED App!)
         4. `import "./index.css";`
         5. `import { ThemeProvider } from "./components/theme-provider";`
         6. `import App from "./App";`
       - Renderuj: StrictMode > ThemeProvider (storageKey="renocost-theme") > App

    8. App.tsx:
       - Importuj router z ./router
       - Renderuj <RouterProvider router={router} />
       - Usun domyslny content Vite (App.css, logo, counter)

    9. Usun niepotrzebne pliki z scaffoldu Vite: App.css, assets/react.svg, public/vite.svg (jezeli istnieja)
  </action>
  <verify>
    - `pnpm dev` -- strona wyswietla "Kalkulator Kosztow Remontu" (tekst z pl/common.json)
    - Adres przegladarki zawiera `/#/` (HashRouter)
    - Otworz DevTools Console -> wpisz `localStorage.setItem("renocost-theme", "dark")` -> odswiez -> strona ma ciemne tlo BEZ migniecia bialym
    - Otworz DevTools Console -> wpisz `localStorage.setItem("renocost-lng", "en")` -> odswiez -> tekst zmienia sie na "Renovation Cost Calculator"
    - `pnpm build` buduje bez bledow TypeScript
    - Fonty Inter i Montserrat laduja sie z node_modules (Network tab: brak requestow do fonts.googleapis.com)
  </verify>
  <done>
    ThemeProvider dziala z persystencja w localStorage ("renocost-theme"). i18next inicjalizuje sie z PL/EN, persystuje jezyk w localStorage ("renocost-lng"). HashRouter obsluguje trasy z /#/. HomePage wyswietla przetlumaczony tekst. Fonty laduja sie lokalnie. Brak FOUC przy dark mode. TypeScript kompiluje sie bez bledow.
  </done>
</task>

</tasks>

<verification>
1. `pnpm dev` -- serwer startuje, strona laduje sie pod http://localhost:5173
2. `pnpm build` -- buduje bez bledow
3. `pnpm run lint` -- brak bledow ESLint (v9.x)
4. HashRouter: URL zawiera /#/
5. Dark mode: localStorage "renocost-theme" -> "dark" + refresh = ciemny motyw bez FOUC
6. i18n: localStorage "renocost-lng" -> "en" + refresh = angielskie teksty
7. Fonty: Network tab nie pokazuje requestow do Google Fonts
</verification>

<success_criteria>
- Projekt kompiluje sie i uruchamia bez bledow (dev + build + lint)
- Tailwind v4 klasy sa aplikowane
- shadcn Button komponent jest dostepny i renderuje sie
- createHashRouter obsluguje SPA routing
- ThemeProvider + inline anti-FOUC script dzialaja -- dark mode bez migniecia
- i18next z PL/EN, persystencja w localStorage
- Fonty Inter i Montserrat laduja sie lokalnie
- HomePage wyswietla przetlumaczony tekst
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-design-system/01-01-SUMMARY.md`
</output>
